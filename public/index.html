<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Song for a System</title>
  <script src="js/phaser.min.js"></script>

  <script src="js/battle.js"></script>
  <script src="js/splash.js"></script>
  <script src="js/profiler.js"></script>

  <script src="/socket.io/socket.io.js"></script>

  <link rel="stylesheet" href="css/default.css">
</head>
<body>
  <script>
    (function () {
      var game = new Phaser.Game(640, 360, Phaser.AUTO, "game");
      game.state.add("Splash", splash);
      game.state.add("Profiler", profiler);
      game.state.add("Battle", battle);
      game.state.start("Splash");

      game.utils = {
          MAXIMUM_CARDS_IN_DECK: 30,
          MAXIMUM_DECKS: 9,
          MAXIMUM_GEARS: 10,
          MAXIMUM_LIVE_AUTOMATONS: 7,
          MAXIMUM_AVATAR_HEALTH: 30,

          BABBOCK: 0,
          DE_BORG: 1,
          VAN_NEWMAN: 2,
          MCCREARY: 3,

          avatarMap: ['babbock', 'de_borg', 'van_newman', 'mccreary']
      };

      game.socket = io();

      game.socket.on('match started', function(data) {
          game.state.start('Battle', true, false, data);
      });
      
      game.socket.on('start turn', function(data) {
          game.state.getCurrentState().startTurn(data);
      });
      
      game.socket.on('post action', function(data) {
          game.state.getCurrentState().updateData(data);
      });
      
      game.socket.on('cant play card', function() {
          alert('Couldn\'t play the card...');
      });
    })();
  </script>
</body>
</html>
